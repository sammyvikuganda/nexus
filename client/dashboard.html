<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-database.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-analytics.js";

    const firebaseConfig = {
        apiKey: "AIzaSyChlMYXcLFlfRsX3UARcoK8-IC8XRxig14",
        authDomain: "records-1674c.firebaseapp.com",
        databaseURL: "https://records-1674c-default-rtdb.firebaseio.com",
        projectId: "records-1674c",
        storageBucket: "records-1674c.appspot.com",
        messagingSenderId: "592414404602",
        appId: "1:592414404602:web:917365f2b54522ef953e43",
        measurementId: "G-H6HCSQWZY2"
    };

    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const database = getDatabase(app);

    let userId = null;

    // Check if the user is logged in
    fetch('/api/session')
        .then(res => res.json())
        .then(data => {
            userId = data.userId;
            console.log('Session userId:', userId);

            // If no userId found, redirect to login page
            if (!userId) {
                window.location.href = '/api/login'; // Redirect to login if no userId
            } else {
                // Enable UI or functions that require userId
                console.log('User is logged in:', userId);
            }
        })
        .catch(err => {
            console.error('Session fetch error:', err);
            window.location.href = '/api/login'; // Redirect to login if fetch fails
        });

    // Dashboard and other functions go here

    const serverUrl = 'https://suppay-ppnnit8wl-nexus-int.vercel.app';
    const balanceServerUrl = 'https://suppay-ppnnit8wl-nexus-int.vercel.app';
    const capitalServerUrl = 'https://suppay-ppnnit8wl-nexus-int.vercel.app';

    const BASE_URL = 'https://suppay-ppnnit8wl-nexus-int.vercel.app';

    const host = window.location.origin;

    let progressInterval = null;
    let countdownInterval = null;
    let currentAction = null;
    let stopInvestmentAmount = 0;

    // Function to handle the active state
    function setActive(navItem) {
        // Remove active class from all nav items and add inactive
        const allNavItems = document.querySelectorAll('.nav-item');
        allNavItems.forEach(item => {
            item.classList.remove('active');
            item.classList.add('inactive');
        });

        // Add active class to the clicked nav item
        navItem.classList.remove('inactive');
        navItem.classList.add('active');
    }

    document.addEventListener('DOMContentLoaded', (event) => {
        loadHomeContent(); // Load Home section immediately on page load

        // Set the Home button as active by default
        setActive(document.querySelector('.nav-item.home'));

        // Adding event listeners to each nav item and setting the active class
        document.querySelector('.nav-item.home').addEventListener('click', () => {
            loadHomeContent();
            setActive(document.querySelector('.nav-item.home'));
        });

        document.querySelector('.nav-item.chat').addEventListener('click', () => {
            goToSupport();
            setActive(document.querySelector('.nav-item.chat'));
        });

        document.querySelector('.nav-item.wallet').addEventListener('click', () => {
            goToWallet();
            setActive(document.querySelector('.nav-item.wallet'));
        });

        document.querySelector('.nav-item.reports').addEventListener('click', () => {
            goToReports();
            setActive(document.querySelector('.nav-item.reports'));
        });

        document.querySelector('.nav-item.settings').addEventListener('click', () => {
            goToSettings();
            setActive(document.querySelector('.nav-item.settings'));
        });
    });

    function loadHomeContent() {
    const content = `
        <div class="app-container">
  <div class="home-section">
    <div class="header">
      <div class="header-left">
        <!-- Replaced the image with FontAwesome user icon -->
        <div class="user-icon">
          <i class="fas fa-user-circle"></i>
        </div>
        <div class="user-info">
          <h2 id="user-name">
            Hello,
            <span id="dynamic-user-name">
              <i class="fas fa-circle-notch fa-spin"></i>
            </span>
            <span class="material-icons" style="display: none;">verified</span>
          </h2>
          <p>Every Small Step Makes a Big Impact.</p>
        </div>
      </div>
      <div class="header-right">
        <a href="go:AB" aria-label="Notification">
          <i data-feather="bell" class="notification-icon"></i>
        </a>
      </div>
    </div>

    <div class="balance-wrapper">
      <div class="balance-container">
        <div id="balance" class="balance">
          <span class="currency"></span>
          <span id="balance-skeleton" class="skeleton-loader"></span>
          <span id="balance-amount" class="amount" style="display: none;"></span>
          <span id="balance-placeholder" class="amount" style="display: none;">•••••••</span>
        </div>
        <!-- Replaced the image with Material Icon for toggle balance -->
        <i id="toggle-icon" class="material-icons" onclick="toggleBalance()">visibility</i>
      </div>
      <div class="floating-button">
        <button class="service" id="newTradingButton">Topup balance</button>
      </div>
    </div>
</div>


  <div class="content">
  <div class="action-buttons">
    <button class="action-button" id="withdraw-button">
      <i data-feather="arrow-down-circle"></i>Withdraw
    </button>
    <button class="action-button">
      <i data-feather="send"></i>Send
    </button>
  </div>

  <div class="icon-button-row">
    <!-- Updated Activity button -->
    <a href="go:ACTIVITY" class="icon-button">
      <i data-feather="activity"></i>
      <span>Activity</span>
    </a>

    <!-- Referrals button now links to REFERRALS page -->
    <a href="go:REFERRALS" class="icon-button"> <!-- Link to REFERRALS page -->
      <i data-feather="users"></i>
      <span>Referrals</span>
    </a>

    <div class="icon-button">
      <i data-feather="dollar-sign"></i>
      <span>USD Wallet</span>
    </div>
  </div>

  <div class="monthly-gain">
    <h3>Total Gained</h3>
    <div class="amount">---</div>
    <div class="month">---</div>
  </div>
</div>
</div>

<div class="withdraw-bottom-sheet" id="bottom-sheet">
  <header class="withdraw-header">
    <i class="fas fa-arrow-left withdraw-back-arrow" id="back-arrow"></i>
    <div class="withdraw-title">Withdraw</div>
  </header>

  <form class="withdraw-form" id="withdraw-form">
    <div class="withdraw-form-group">
      <label for="phone-number">Phone Number</label>
      <input
        type="tel"
        id="phone-number"
        name="phone-number"
        placeholder="Enter your phone number"
        required
        readonly
      />
    </div>

    <div class="withdraw-form-group">
      <label for="amount" style="display: flex; justify-content: space-between; align-items: center;">
  <span>Amount to Withdraw</span>
  <span id="receive-amount" style="color: green; font-size: 12px;">You receive: 50000</span>
</label>
      <input
        type="number"
        id="amount"
        name="amount"
        placeholder="Enter amount"
        required
      />
    </div>
<div class="withdraw-insufficient-balance" id="insufficient-balance" style="display:none;">
  Insufficient balance
</div>
<div class="withdraw-insufficient-balance" id="invalid-user" style="display:none;">
  Invalid sender or receiver
</div>
<div class="withdraw-insufficient-balance" id="self-send" style="display:none;">
  You cannot send money to yourself
</div>
<div class="withdraw-insufficient-balance" id="min-withdrawal" style="display:none;">
  Minimum withdrawal is UGX 1,500
</div>
<div class="withdraw-insufficient-balance" id="min-topup" style="display:none;">
  Minimum top up is UGX 1,000
</div>
<div class="withdraw-insufficient-balance" id="provider-error" style="display:none;">
  Internal server error from provider. Failed to process withdrawal.
</div>

<button type="submit">Withdraw</button>
</form>
</div>

    


    `;
document.getElementById('content').innerHTML = content;

document.getElementById('toggle-icon').addEventListener('click', toggleBalance);

feather.replace();

let countryCurrencyMap = {};
let isBalanceLoading = true;  // Flag to indicate if the balance is still loading

fetchCountryCurrencyMap().then(() => {
    setupRealtimeListener(); // Setup listener only after currency map is loaded
});

const withdrawButton = document.getElementById('withdraw-button');
const sendButton = document.querySelector('.action-button:nth-child(2)');
const bottomSheet = document.getElementById('bottom-sheet');
const backArrow = document.getElementById('back-arrow');
const withdrawForm = document.getElementById('withdraw-form');

let currentAction = 'withdraw';

withdrawButton.addEventListener('click', () => {
    currentAction = 'withdraw';
    prepareBottomSheetForWithdraw();
    bottomSheet.classList.add('open');
    history.pushState(null, '', location.href);
});

sendButton.addEventListener('click', () => {
    currentAction = 'send';
    prepareBottomSheetForSend();
    bottomSheet.classList.add('open');
    history.pushState(null, '', location.href);
});

const topUpButton = document.getElementById('newTradingButton'); // Add the Topup button
topUpButton.addEventListener('click', () => {
    currentAction = 'topup'; // Set the action to topup
    prepareBottomSheetForTopup(); // Prepare the bottom sheet for topup
    bottomSheet.classList.add('open'); // Open the bottom sheet
    history.pushState(null, '', location.href); // Manage browser history
});

backArrow.addEventListener('click', () => {
    bottomSheet.classList.remove('open');
    history.back();
    resetBottomSheet();
});

window.addEventListener('popstate', () => {
    if (bottomSheet.classList.contains('open')) {
        bottomSheet.classList.remove('open');
        resetBottomSheet();
    }
});

// Fetch country-currency map
async function fetchCountryCurrencyMap() {
    const res = await fetch("https://suppay-g4kn17kq4-nexus-int.vercel.app/api/countries");
    const countries = await res.json();
    countries.forEach(({ country, currency_code }) => {
        countryCurrencyMap[country] = currency_code;
    });
}

function setupRealtimeListener() {
    const dbRef = ref(database, `users/${userId}`);
    onValue(dbRef, async (snapshot) => {
        if (snapshot.exists()) {
            const data = snapshot.val();
            document.getElementById('dynamic-user-name').textContent = data.firstName || 'Unknown';

            // Start by disabling the toggle icon until the balance is loaded
            isBalanceLoading = true;
            document.getElementById('toggle-icon').disabled = true;

            const balance = data.balance || 0;
            document.getElementById('balance-amount').textContent = Number(balance).toLocaleString();
            document.getElementById('balance-amount').style.display = 'block';
            document.getElementById('balance-skeleton').style.display = 'none';

            const userCountry = data.country;
            const dynamicCurrency = countryCurrencyMap[userCountry] || "USD";

            document.querySelector('.currency').textContent = dynamicCurrency;

            // Set totalGained value with real currency
            const totalGained = data.totalGained || 0;
            document.querySelector('.monthly-gain .amount').textContent = `${dynamicCurrency} ${Number(totalGained).toLocaleString()}`;

            // Set registration date
            const registeredAt = data.registeredAt;
            if (registeredAt) {
                const date = new Date(registeredAt);
                const formattedDate = date.toLocaleDateString('en-GB'); // e.g., 23/04/2025
                document.querySelector('.monthly-gain .month').textContent = `Registered on ${formattedDate}`;
            }

            // Once balance is loaded, enable the toggle button
            isBalanceLoading = false;
            document.getElementById('toggle-icon').disabled = false;
        }
    });
}

function fetchPhoneNumber() {
    const dbRef = ref(database, `users/${userId}/phoneNumber`);
    import('https://www.gstatic.com/firebasejs/10.13.0/firebase-database.js').then(({ get }) => {
        get(dbRef).then((snapshot) => {
            if (snapshot.exists()) {
                document.getElementById('phone-number').value = snapshot.val();
            }
        });
    });
}

function toggleBalance() {
    // Prevent toggling if balance is still being fetched
    if (isBalanceLoading) return;

    const balanceAmount = document.getElementById('balance-amount');
    const balancePlaceholder = document.getElementById('balance-placeholder');
    const toggleIcon = document.getElementById('toggle-icon');

    const isHidden = balanceAmount.style.display === 'none';
    balanceAmount.style.display = isHidden ? 'block' : 'none';
    balancePlaceholder.style.display = isHidden ? 'none' : 'block';

    // Correct toggle icon: visibility_off when hidden and visibility when shown
    toggleIcon.textContent = isHidden ? 'visibility' : 'visibility_off';
}








function resetBottomSheet() {
    withdrawForm.reset();

    // Hide error messages on reset
    const errorMessages = [
        'insufficient-balance',
        'invalid-user',
        'self-send',
        'min-withdrawal',
        'min-topup'
    ];

    errorMessages.forEach(errorId => {
        const element = document.getElementById(errorId);
        if (element) {
            element.style.display = 'none';
        }
    });

    const receiverInput = document.getElementById('receiver-id');
    if (receiverInput) receiverInput.parentElement.remove();

    const phoneInput = document.getElementById('phone-number');
    if (!phoneInput) {
        const phoneGroup = document.createElement('div');
        phoneGroup.className = 'withdraw-form-group';
        phoneGroup.innerHTML = `
            <label for="phone-number">Phone Number</label>
            <input type="tel" id="phone-number" name="phone-number" placeholder="Enter your phone number" required readonly />
        `;
        withdrawForm.insertBefore(phoneGroup, withdrawForm.firstChild);
    } else {
        phoneInput.readOnly = true;
    }

    document.querySelector('.withdraw-title').textContent = 'Withdraw';
    document.querySelector('button[type="submit"]').textContent = 'Withdraw';
}


function prepareBottomSheetForWithdraw() {
    const phoneInput = document.getElementById('phone-number');
    if (!phoneInput) {
        const phoneGroup = document.createElement('div');
        phoneGroup.className = 'withdraw-form-group';
        phoneGroup.innerHTML = `
            <label for="phone-number">Phone Number</label>
            <input type="tel" id="phone-number" name="phone-number" placeholder="Enter your phone number" required readonly />
        `;
        withdrawForm.insertBefore(phoneGroup, withdrawForm.firstChild);
    }

    fetchPhoneNumber();
    document.querySelector('.withdraw-title').textContent = 'Withdraw';
    document.querySelector('button[type="submit"]').textContent = 'Withdraw';

    const amountLabel = document.querySelector('label[for="amount"]');
    amountLabel.innerHTML = `
        <span>Amount to Withdraw</span>
        <span id="receive-amount" style="color: green; font-size: 12px; margin-left: 10px;">You receive: 0</span>
    `;

    const receiverInput = document.getElementById('receiver-id');
    if (receiverInput) receiverInput.parentElement.remove();

    // Set up event listener to update "You receive"
    const amountInput = document.getElementById('amount');
    amountInput.addEventListener('input', function () {
        const inputAmount = parseFloat(this.value);
        const receiveAmountElement = document.getElementById('receive-amount');
        if (!isNaN(inputAmount) && inputAmount > 0) {
            const receiveAmount = inputAmount * 0.9; // Adjust calculation logic as needed
            receiveAmountElement.textContent = `You receive: ${receiveAmount.toLocaleString()}`;
        } else {
            receiveAmountElement.textContent = `You receive: 0`;
        }
    });
}

function prepareBottomSheetForSend() {
    const phoneInput = document.getElementById('phone-number');
    if (phoneInput) phoneInput.parentElement.remove();

    document.querySelector('.withdraw-title').textContent = 'Send Money';
    document.querySelector('button[type="submit"]').textContent = 'Send';
    document.querySelector('label[for="amount"]').textContent = 'Enter amount to send'; // <-- this line

    const receiverInput = document.getElementById('receiver-id');
    if (!receiverInput) {
        const formGroup = document.createElement('div');
        formGroup.className = 'withdraw-form-group';
        formGroup.innerHTML = `
            <label for="receiver-id">Recipient ID</label>
            <input type="text" id="receiver-id" name="receiver-id" placeholder="Enter recipient's ID" required />
        `;
        withdrawForm.insertBefore(formGroup, withdrawForm.firstChild);
    }
}


function resetWithdrawButton() {
    const btn = document.querySelector('button[type="submit"]');
    btn.textContent = currentAction === 'send' ? 'Send' : 'Withdraw';
    btn.disabled = false;
}

withdrawForm.addEventListener('submit', function (e) {
    e.preventDefault();

    // Hide all error messages on submit
    ['insufficient-balance', 'invalid-user', 'self-send', 'min-withdrawal', 'min-topup'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.style.display = 'none';
    });

    const submitBtn = document.querySelector('button[type="submit"]');
    submitBtn.textContent = "Processing...";
    submitBtn.disabled = true;

    const amount = parseFloat(document.getElementById('amount').value.trim());
    if (isNaN(amount) || amount <= 0) {
        alert("Enter a valid amount.");
        return resetWithdrawButton();
    }

    const phoneInput = document.getElementById('phone-number');
    const phone = phoneInput ? phoneInput.value.trim() : '';

    if (currentAction === 'withdraw') {
        if (!phone) {
            alert("Phone number required.");
            return resetWithdrawButton();
        }
        processWithdrawal(phone, amount);
    } else if (currentAction === 'topup') {
        if (!phone) {
            alert("Phone number required.");
            return resetWithdrawButton();
        }
        processTopup(phone, amount);
    } else {
        const receiverId = document.getElementById('receiver-id').value.trim();
        if (!receiverId) {
            alert("Recipient ID required.");
            return resetWithdrawButton();
        }

        if (receiverId === userId) {
            document.getElementById('self-send').style.display = 'block';
            return resetWithdrawButton();
        }

        processSend(receiverId, amount);
    }
});





function prepareBottomSheetForTopup() {
    // Ensure phone number input remains read-only if it already exists
    const phoneInput = document.getElementById('phone-number');
    if (!phoneInput) {
        const phoneGroup = document.createElement('div');
        phoneGroup.className = 'withdraw-form-group';
        phoneGroup.innerHTML = `
            <label for="phone-number">Phone Number</label>
            <input type="tel" id="phone-number" name="phone-number" placeholder="Enter your phone number" required readonly />
        `;
        withdrawForm.insertBefore(phoneGroup, withdrawForm.firstChild);
    }

    fetchPhoneNumber(); // Populate phone number
    document.querySelector('.withdraw-title').textContent = 'Topup'; // Set title for topup
    document.querySelector('button[type="submit"]').textContent = 'Topup'; // Change button text
    document.querySelector('label[for="amount"]').textContent = 'Amount to Topup'; // Update label text
}





function processWithdrawal(phone, amount) {
    const minAmount = 1000;
    if (amount < minAmount) {
        document.getElementById('min-withdrawal').style.display = 'block';
        resetWithdrawButton();
        return;
    }

    const userRef = ref(database, `users/${userId}`);
    import('https://www.gstatic.com/firebasejs/10.13.0/firebase-database.js').then(({ get }) => {
        get(userRef).then((snapshot) => {
            const currentBalance = snapshot.val().balance || 0;
            if (currentBalance >= amount) {
                // Use the constant balanceServerUrl instead of the hardcoded URL
                fetch(`${balanceServerUrl}/api/update-balance`, {
                    method: 'PATCH',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        userId: userId,
                        amount: amount,
                        reason: 'Withdraw',
                        phone: phone,
                    }),
                })
                .then(response => response.json())
                .then(data => {
                    if (data.message === "Withdraw initiated successfully") {
                        resetBottomSheet();
                        bottomSheet.classList.remove('open');
                        resetWithdrawButton();
                    } else if (data.message === "Failed to initiate withdraw with Teza" && data.details === "Insufficient funds available for withdrawal") {
                        document.getElementById('insufficient-balance').style.display = 'block';
                        resetWithdrawButton();
                    } else if (data.message === "Failed to initiate withdraw with Teza" && data.details === "Transaction failed from provider: try again later") {
                        // Show a custom error message for provider issues
                        document.getElementById('provider-error').style.display = 'block'; // This is the new error div
                        resetWithdrawButton();
                    } else {
                        resetWithdrawButton();
                    }
                })
                .catch(error => {
                    console.error('Error making withdrawal request:', error);
                    resetWithdrawButton();
                });
            } else {
                document.getElementById('insufficient-balance').style.display = 'block';
                resetWithdrawButton();
            }
        });
    });
}


function processTopup(phone, amount) {
    const minAmount = 1000;
    if (amount < minAmount) {
        document.getElementById('min-topup').style.display = 'block';
        resetWithdrawButton();
        return;
    }

    const userRef = ref(database, `users/${userId}`);
    import('https://www.gstatic.com/firebasejs/10.13.0/firebase-database.js').then(({ get }) => {
        get(userRef).then((snapshot) => {
            // Use the constant balanceServerUrl instead of the hardcoded URL
            fetch(`${balanceServerUrl}/api/update-balance`, {
                method: 'PATCH',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    userId: userId,
                    amount: amount,
                    reason: 'Top Up',
                    phone: phone,
                }),
            })
            .then(response => response.json())
            .then(data => {
                if (data.message === "Top Up initiated successfully") {
                    resetBottomSheet();
                    bottomSheet.classList.remove('open');
                    resetWithdrawButton();
                } else {
                    alert('Top-up failed: ' + data.message);
                    resetWithdrawButton();
                }
            })
            .catch(error => {
                console.error('Error processing top-up request:', error);
                alert('There was an error processing your top-up.');
                resetWithdrawButton();
            });
        });
    });
}








function processSend(receiverId, amount) {
    const userRef = ref(database, `users/${userId}`);
    const receiverRef = ref(database, `users/${receiverId}`);

    import('https://www.gstatic.com/firebasejs/10.13.0/firebase-database.js').then(({ get, update, push }) => {
        Promise.all([get(userRef), get(receiverRef)]).then(([senderSnap, receiverSnap]) => {
            if (!senderSnap.exists() || !receiverSnap.exists()) {
                document.getElementById('invalid-user').style.display = 'block';
                return resetWithdrawButton();
            }

            const sender = senderSnap.val();
            const receiver = receiverSnap.val();

            if (sender.userId === receiverId) {
                document.getElementById('self-send').style.display = 'block';
                return resetWithdrawButton();
            }

            if (sender.balance >= amount) {
                const updates = {};
                updates[`users/${userId}/balance`] = sender.balance - amount;
                updates[`users/${receiverId}/balance`] = (receiver.balance || 0) + amount;

                update(ref(database), updates).then(() => {
                    const timestamp = Date.now();

                    const txSender = {
                        to: receiverId,
                        amount,
                        type: 'send',
                        status: 'completed',
                        timestamp
                    };

                    const txReceiver = {
                        from: userId,
                        amount,
                        type: 'receive',
                        status: 'completed',
                        timestamp
                    };

                    Promise.all([
                        push(ref(database, `users/${userId}/transactions`), txSender),
                        push(ref(database, `users/${receiverId}/transactions`), txReceiver)
                    ]).then(() => {
                        resetBottomSheet();
                        bottomSheet.classList.remove('open');
                        resetWithdrawButton();
                        window.location.href = "go:ACTIVITY";
                    });
                });
            } else {
                document.getElementById('insufficient-balance').style.display = 'block';
                resetWithdrawButton();
            }
        });
    });
  }
}








        function goToSupport() {
    const supportContent = `
        <div class="app-container">
    <header>Support</header>

 

  <div class="content">
    <!-- CHAT SUPPORT -->
    <a href="go:CHAT" class="support-link">
      <div class="support-container">
        <div class="support-circle">C</div>
        <div class="support-text">
          <p id="support-text">CHAT WITH US</p>
          <p id="support-tap-to-text">Tap here to text us</p>
        </div>
        <i class="fas fa-chevron-right support-icon"></i>
      </div>
    </a>

    <!-- TELEGRAM SUPPORT -->
    <a href="https://t.me/nexussupport20" class="support-link">
      <div class="support-container">
        <div class="support-circle">
          <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram" class="support-circle-icon">
        </div>
        <div class="support-text">
          <p id="support-text">TELEGRAM</p>
          <p id="support-tap-to-text">Tap here to message us</p>
        </div>
        <i class="fas fa-chevron-right support-icon"></i>
      </div>
    </a>

    <!-- TELEGRAM GROUP -->
    <a href="https://t.me/+fWRGQqYJUZQwMzlk" class="support-link">
      <div class="support-container">
        <div class="support-circle">
          <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram Group" class="support-circle-icon">
        </div>
        <div class="support-text">
          <p id="support-text">TELEGRAM GROUP</p>
          <p id="support-tap-to-text">Join the community</p>
        </div>
        <i class="fas fa-chevron-right support-icon"></i>
      </div>
    </a>

    <!-- FAQS -->
    <a href="go:FAQS" class="support-link">
      <div class="support-container">
        <div class="support-circle">F</div>
        <div class="support-text">
          <p id="support-text">FAQ</p>
          <p id="support-tap-to-text">Common Questions</p>
        </div>
        <i class="fas fa-chevron-right support-icon"></i>
      </div>
    </a>
  </div>
</div>

    `;
    loadContent(supportContent);
}


        




           function goToWallet() {
    const walletContent = `
    <div class="app-container">
    <header>GAMES</header>

  <div class="content">
    <div class="game-image-container">
      <a href="go:FRUITS">
        <img src="https://i.postimg.cc/9fM5XKcp/c60cacec-e353-4a9e-947a-fa2fec50bbd1.png" alt="Casino Machine 1" />
        <div class="game-name">FRUITS</div>
      </a>

      <a href="go:LUCKY3">
        <img src="https://i.postimg.cc/Xqng4SbN/70d8c0d0-c934-476f-a937-f17aa570e254.png" alt="Casino Machine 2" />
        <div class="game-name">LUCKY3</div>
      </a>
    </div>
  </div>

    `;
    loadContent(walletContent);

    }


        function goToReports() {
            const reportsContent = `
<div class="app-container">
    <header>Investments</header>

    <div class="content">
    <div class="top-info">
      <div class="info-box"><h4>Invested</h4><p id="investedAmount">---</p></div>
      <div class="info-box"><h4>Profits</h4><p id="profitAmount">---</p></div>
    </div>
<p id="countdownTimer" class="countdown-text"></p>
    <div class="circle-wrapper">
      <span id="planLabel" class="">---</span>
      <div class="circle" id="progressCircle">
        <div class="circle-inner"><h5>Daily Payout</h5><p id="earningAmount">---</p></div>
      </div>
      <span class="label-text">---</span>
    </div>

    <div class="buttons">
      <button id="investButton"><i class="fas fa-plus-circle"></i> Invest</button>
      <button id="stopInvestmentButton"><i class="fas fa-stop-circle"></i> Stop Investment</button>
      <button id="cashOutButton"><i class="fas fa-coins"></i> Cashout</button>
    </div>

    <div class="info-text">
      To withdraw your capital from investment press Stop Investment. Note that this will stop the investment contract and your daily earnings will be stopped.
    </div>

    <div class="section-title">Transaction History</div>
    <div class="transaction-cards" id="transactionCards"></div>
  </div>

  

  

<!-- Modal for stopping investment -->
<div class="modal-required" id="stopInvestmentModal">
  <div class="modal-content-required">
    <h2 class="modal-heading">Are you sure you want to stop this investment?</h2>
    <p>Note that your capital will be transferred back to your main wallet and daily payout will stop.</p>
    <div>
      <button class="close-required" id="confirmStopInvestment">Yes Stop</button>
      <button class="cancel-required" id="cancelStopInvestment">Cancel</button>
    </div>
  </div>
</div>
                <!-- Cash Out Bottom Sheet -->
<div id="cashOutSheet" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-end z-50 hidden">
  <div class="bg-gray-900 w-full max-w-md mx-auto rounded-t-2xl p-6 shadow-lg">
    
    <!-- Header row with Cash Out and Premium button -->
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-lg font-bold text-yellow-400">Cash Out</h2>
      <a href="go:PREMIUM" id="getPremiumBtn" class="hidden no-underline">
        <div class="flex items-center gap-1 bg-gradient-to-r from-yellow-400 to-yellow-600 text-black font-semibold text-sm px-4 py-1.5 rounded-full shadow-md hover:scale-105 transition transform duration-200">
          <svg class="w-4 h-4 text-black" fill="currentColor" viewBox="0 0 20 20">
            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.178c.969 0 1.371 1.24.588 1.81l-3.385 2.46a1 1 0 00-.364 1.118l1.287 3.97c.3.921-.755 1.688-1.54 1.118l-3.386-2.46a1 1 0 00-1.175 0l-3.385 2.46c-.784.57-1.838-.197-1.539-1.118l1.287-3.97a1 1 0 00-.364-1.118L2.046 9.397c-.783-.57-.38-1.81.588-1.81h4.178a1 1 0 00.95-.69l1.287-3.97z"></path>
          </svg>
          <span>Get Premium</span>
        </div>
      </a>
    </div>

    <label class="block mb-2 text-sm font-medium text-white" for="cashOutAmount">Enter Amount (UGX)</label>
    <input type="tel" id="cashOutAmount" class="w-full px-4 py-2 rounded-md bg-gray-800 text-white border border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-500 mb-4" placeholder="e.g., 1000" min="1">
    
    <!-- Message box -->
    <div id="messageBox" class="text-sm mb-4 text-center text-red-400 hidden"></div>
    
    <!-- Buttons: Cancel on left, Confirm on right -->
    <div class="flex justify-between gap-2">
      <button id="cancelCashOut" class="bg-gray-700 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition w-full">Cancel</button>
      <button id="confirmCashOut" class="bg-yellow-500 text-black font-bold px-4 py-2 rounded-md hover:bg-yellow-600 transition w-full">Confirm</button>
    </div>
  </div
</div>

`;

  loadContent(reportsContent);
const dbRef = ref(database, `users/${userId}`);

let userCurrency = 'USD';
let countryCurrencyMap = {};

// Fetch country-currency mapping
async function fetchCountryCurrencyMap() {
  const res = await fetch("https://suppay-jk2tewg4u-sammyviks-projects.vercel.app/api/countries");
  const countries = await res.json();
  countries.forEach(({ country, currency_code }) => {
    countryCurrencyMap[country] = currency_code;
  });
}

function formatCurrency(amount, currencyCode) {
  try {
    if (isNaN(amount)) amount = 0;
    return new Intl.NumberFormat('en-US', {
      style: 'currency',
      currency: currencyCode,
      minimumFractionDigits: 0,
      maximumFractionDigits: 0
    }).format(amount);
  } catch {
    return `${currencyCode} ${amount}`;
  }
}

function updateCircleProgress(lastUpdatedTime, invested) {
  const circle = document.getElementById('progressCircle');
  const countdown = document.getElementById('countdownTimer');

  if (!lastUpdatedTime || !circle || !countdown || invested <= 0) {
    countdown.style.display = 'none';
    circle.style.background = 'conic-gradient(#eee 0%, #eee 100%)';
    return;
  }

  const now = new Date();
  const start = new Date(lastUpdatedTime);
  const elapsedMs = now - start;
  const totalMs = 24 * 60 * 60 * 1000;
  const percentage = Math.min((elapsedMs / totalMs) * 100, 100).toFixed(2);
  circle.style.background = `conic-gradient(#ff00cc ${percentage}%, #eee ${percentage}%)`;

  const remainingMs = Math.max(totalMs - elapsedMs, 0);
  const hours = String(Math.floor(remainingMs / (1000 * 60 * 60))).padStart(2, '0');
  const minutes = String(Math.floor((remainingMs % (1000 * 60 * 60)) / (1000 * 60))).padStart(2, '0');
  const seconds = String(Math.floor((remainingMs % (1000 * 60)) / 1000)).padStart(2, '0');
  countdown.innerText = `Next payout in: ${hours}:${minutes}:${seconds}`;
  countdown.style.display = 'block';

  // Continuously update every second if invested
  requestAnimationFrame(() => updateCircleProgress(lastUpdatedTime, invested));
}

async function loadInvestmentData(data) {
  if (!Object.keys(countryCurrencyMap).length) {
    await fetchCountryCurrencyMap();
  }

  const userCountry = data.country;
  userCurrency = countryCurrencyMap[userCountry] || "USD";

  const res = await fetch(`${serverUrl}/api/fetchInvestment/${userId}`);
  const investData = await res.json();

  const invested = investData.amount || 0;
  const profit = investData.payout || 0;

  document.getElementById('investedAmount').innerText = formatCurrency(invested, userCurrency);
  document.getElementById('profitAmount').innerText = formatCurrency(profit, userCurrency);

  const earningElement = document.getElementById('earningAmount');
  const planLabel = document.getElementById('planLabel');
  const labelText = document.querySelector('.label-text');
  const countdown = document.getElementById('countdownTimer');

  let earningAmount = 0;
  let planPercentage = 0;

  if (invested > 0) {
    if (investData.premium === 0) {
      earningAmount = Math.floor(invested * 0.01);
      planPercentage = 1;
      planLabel.innerText = 'Free Plan';
      labelText.innerText = '1% per day';
      planLabel.classList.add('label-free');
      planLabel.classList.remove('label-premium');
    } else {
      planPercentage = investData.premium;
      earningAmount = Math.floor(invested * (planPercentage / 100));
      planLabel.innerText = 'Premium';
      labelText.innerText = `${planPercentage}% per day`;
      planLabel.classList.add('label-premium');
      planLabel.classList.remove('label-free');
    }

    earningElement.innerText = formatCurrency(earningAmount, userCurrency);
  } else {
    earningElement.innerText = formatCurrency(0, 'UGX');
    planLabel.innerText = 'No Plan';
    labelText.innerText = '0% per day';
    planLabel.classList.remove('label-premium', 'label-free');
    countdown.style.display = 'none';
  }

  const stopBtn = document.getElementById('stopInvestmentButton');
  if (invested <= 0) {
    stopBtn.innerText = 'No Investment';
    stopBtn.disabled = true;
    stopBtn.style.background = '#ccc';
    stopBtn.style.color = '#666';
    stopBtn.style.cursor = 'not-allowed';
  } else {
    stopBtn.innerHTML = '<i class="fas fa-stop-circle"></i> Stop Investment';
    stopBtn.disabled = false;
    stopBtn.style.background = 'linear-gradient(135deg, #ff00cc, #3333ff)';
    stopBtn.style.color = 'white';
    stopBtn.style.cursor = 'pointer';
  }

  const txContainer = document.getElementById('transactionCards');
  txContainer.innerHTML = (investData.transactions || []).slice().reverse().map(tx => `
    <div class="transaction-card">
      <div class="transaction-info">
        <h4>${tx.reason}</h4>
        <p>Time: ${new Date(tx.time).toLocaleString()}</p>
      </div>
      <div class="transaction-amount">
        ${tx.reason === 'Commission paid' || tx.reason === 'Investment added' ? '+' : '-'} ${formatCurrency(tx.amount, userCurrency)}
      </div>
    </div>
  `).join('');

  updateCircleProgress(investData.lastUpdated, invested);
}

// Single Firebase listener for live updates
onValue(dbRef, async (snapshot) => {
  const userData = snapshot.val();
  if (!userData) return;
  await loadInvestmentData(userData);
});



// Update openBottomSheet to dynamically change the currency
function openBottomSheet(action) {
  currentAction = action;
  const sheet = document.getElementById('cashOutSheet');
  const heading = document.querySelector('#cashOutSheet h2');
  const label = document.querySelector('#cashOutSheet label');
  const premiumBtn = document.getElementById('getPremiumBtn');

  heading.innerText = action === 'invest' ? 'Invest' : 'Withdraw profits';
  label.innerText = action === 'invest' ? `Enter amount to invest (${userCurrency})` : `Enter Amount (${userCurrency})`;

  // Update the placeholder to reflect the currency
  document.getElementById('cashOutAmount').placeholder = `e.g., 1000 ${userCurrency}`;

  // Toggle visibility of the Premium button
  if (action === 'invest') {
    premiumBtn.classList.remove('hidden');
  } else {
    premiumBtn.classList.add('hidden');
  }

  document.getElementById('messageBox').classList.add('hidden');
  document.getElementById('cashOutAmount').value = '';
  sheet.classList.remove('hidden');
}

// Button listeners
document.getElementById('investButton').addEventListener('click', () => {
  openBottomSheet('invest');
});

document.getElementById('cashOutButton').addEventListener('click', () => {
  openBottomSheet('cashout');
});

document.getElementById('cancelCashOut').addEventListener('click', () => {
  document.getElementById('cashOutSheet').classList.add('hidden');
});

// Confirm button: Invest or Withdraw
document.getElementById('confirmCashOut').addEventListener('click', async () => {
  const amountInput = document.getElementById('cashOutAmount');
  const amount = parseFloat(amountInput.value);
  const messageBox = document.getElementById('messageBox');

  // Clear message box
  messageBox.classList.add('hidden');
  messageBox.innerText = '';

  if (isNaN(amount) || amount <= 0) {
    messageBox.innerText = 'Please enter a valid amount.';
    messageBox.classList.remove('hidden');
    return;
  }

  const reason = currentAction === 'invest' ? 'Investment added' : 'Withdraw profits';

  try {
    const url = currentAction === 'invest'
      ? `${serverUrl}/api/storeInvestment`
      : `${serverUrl}/api/withdraw`;

    const response = await fetch(url, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ userId, amount, reason })
    });

    const data = await response.json();

    if (data.message && data.message.toLowerCase().includes('successful')) {
      document.getElementById('cashOutSheet').classList.add('hidden');
      loadInvestment();
    } else {
      messageBox.innerText = data.message || 'An error occurred.';
      messageBox.classList.remove('hidden');
    }
  } catch (error) {
    messageBox.innerText = 'An error occurred.';
    messageBox.classList.remove('hidden');
  }
});

// Handle "Stop Investment" button click
document.getElementById('stopInvestmentButton').addEventListener('click', () => {
  // Check if the user has an active investment
  const investedAmount = parseFloat(document.getElementById('investedAmount').innerText.replace(/[^0-9.-]+/g, ""));
  
  if (investedAmount <= 0) return; // No active investment to stop
  
  // Show the modal for confirmation
  document.getElementById('stopInvestmentModal').style.display = 'block';
});

// Handle "Yes, Stop Investment" button click in the modal
document.getElementById('confirmStopInvestment').addEventListener('click', async () => {
  // Check the invested amount again
  const investedAmount = parseFloat(document.getElementById('investedAmount').innerText.replace(/[^0-9.-]+/g, ""));
  
  if (investedAmount <= 0) {
    return;
  }

  try {
    // Send the request to stop the investment (withdraw capital)
    const response = await fetch(`${serverUrl}/api/withdraw`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        userId: userId,
        amount: investedAmount,
        reason: "Withdraw capital"
      })
    });

    const data = await response.json();

    if (data.message && data.message.toLowerCase().includes('successful')) {
      loadInvestment(); // Reload the investment data to reflect changes
    } else {
      // Optionally handle error if the withdrawal was not successful
      console.error("Withdrawal failed: " + (data.message || "Please try again."));
    }
  } catch (error) {
    console.error("An error occurred: " + error.message);
  }

  // Close the modal
  document.getElementById('stopInvestmentModal').style.display = 'none';
});

// Handle "Cancel" button click in the modal
document.getElementById('cancelStopInvestment').addEventListener('click', () => {
  // Close the modal without making any changes
  document.getElementById('stopInvestmentModal').style.display = 'none';
});




}


        
              function goToSettings() {
    const settingsContent = `
        <div class="settings-section">
  <div class="header">
    <i class="fas fa-user-circle" style="font-size: 6rem; color: white;"></i>
    <div class="user-info">
      <h2 id="full-name">Loading...
        <span class="material-icons verified-icon" style="display: none;">check_circle</span>
      </h2>
      <p id="phone-number">Loading...</p>
    </div>
  </div>

  <div class="user-details">
    <div class="detail-item">
      <i class="fas fa-id-card icon"></i>
      <div class="info">
        <span class="label">User ID</span>
        <span id="user-id" class="value">Loading...</span>
      </div>
    </div>
    <div class="detail-item">
      <i class="fas fa-envelope icon"></i>
      <div class="info">
        <span class="label">Email</span>
        <span id="email-address" class="value">Loading...</span>
      </div>
    </div>
    <div class="detail-item">
      <i class="fas fa-user-check icon"></i>
      <div class="info">
        <span class="label">KYC Status</span>
        <span id="kyc-status" class="value">Loading...</span>
      </div>
    </div>
    <div id="change-pin-section" class="detail-item change-pin">
      <i class="fas fa-key icon"></i>
      <div class="info">
        <span class="label">PIN</span>
        <span class="value">Change PIN</span>
      </div>
    </div>
    <div class="detail-item" id="logoutSection">
      <i class="fas fa-sign-out-alt icon"></i>
      <div class="info">
        <span class="label">Account</span>
        <span class="value">Sign out</span>
      </div>
    </div>
  </div>
</div>



    </div>
</div>
<!-- Modal for PIN Change -->
<div id="pinModal" class="modal">
    <div class="modal-content">
        <label id="modalLabel"></label>
        <input type="text" id="modalInput" placeholder="" maxlength="5" inputmode="numeric" autocomplete="off">
        <div class="modal-buttons">
            <button id="cancelButton" class="cancel">Cancel</button>
            <button id="nextButton" class="send">Send</button>
        </div>
    </div>
</div>

<!-- Error Modal -->
<div id="errorModal" class="error-modal">
    <div class="error-modal-content">
        <p id="errorTitle">Error!</p>
        <p id="errorMessage"></p>
        <button id="errorModalCloseButton">CLOSE</button>
    </div>
</div>

<!-- Logout Confirmation Modal -->
<div id="logoutModal" class="logout-modal">
    <div class="logout-modal-content">
        <h2>Sign Out</h2>
        <p>Are you sure you want to sign out?</p>
        <div class="logout-button-container">
            <button id="confirmLogoutButton" class="logout-button logout-confirm">Yes</button>
            <button id="cancelLogoutButton" class="logout-button logout-cancel">Cancel</button>
        </div>
    </div>
</div>

    `;
    
    loadContent(settingsContent);
    loadSettingsDetails();
}


function loadSettingsDetails() {
    const dbRef = ref(database, `users/${userId}`);
    
    onValue(dbRef, (snapshot) => {
        if (snapshot.exists()) {
            const data = snapshot.val();
            document.getElementById('full-name').textContent = `${data.firstName} ${data.lastName}` || 'Unknown';

            // Display phone number without adding the country code +256
            const formattedPhoneNumber = data.phoneNumber ? data.phoneNumber : 'Unknown';
            document.getElementById('phone-number').textContent = formattedPhoneNumber;

            document.getElementById('user-id').textContent = userId;
            document.getElementById('email-address').textContent = data.email || 'Unknown';
            document.getElementById('kyc-status').textContent = data.kyc || 'Unknown'; // Display KYC status
        } else {
            console.log("No data available");
        }
    }, (error) => {
        console.error('Error listening to real-time updates:', error);
    });


    attachLogoutEvents();
    attachChangePinEvents();
}

// Attach logout events
function attachLogoutEvents() {
    const logoutSection = document.getElementById('logoutSection');
    if (logoutSection) {
        logoutSection.addEventListener('click', () => {
            // Show the logout confirmation modal
            const logoutModal = document.getElementById('logoutModal');
            if (logoutModal) {
                logoutModal.style.display = 'block';
            }
        });
    }

    // Handle logout confirmation
    const confirmLogoutButton = document.getElementById('confirmLogoutButton');
    if (confirmLogoutButton) {
        confirmLogoutButton.addEventListener('click', () => {
            // Clear all data from localStorage
            localStorage.clear();
            // Redirect to the specified URL
            window.location.href = 'http://action_exit'; // Replace with your desired URL
        });
    }

    const cancelLogoutButton = document.getElementById('cancelLogoutButton');
    if (cancelLogoutButton) {
        cancelLogoutButton.addEventListener('click', () => {
            // Hide the logout confirmation modal
            const logoutModal = document.getElementById('logoutModal');
            if (logoutModal) {
                logoutModal.style.display = 'none';
            }
        });
    }

    const closeLogoutModal = document.getElementById('logoutModalClose');
    if (closeLogoutModal) {
        closeLogoutModal.addEventListener('click', () => {
            // Hide the logout confirmation modal
            const logoutModal = document.getElementById('logoutModal');
            if (logoutModal) {
                logoutModal.style.display = 'none';
            }
        });
    }
}

// Attach change PIN events
function attachChangePinEvents() {
    const changePinSection = document.getElementById('change-pin-section');
    if (changePinSection) {
        changePinSection.addEventListener('click', handleChangePin);
    }
}


// Handle change PIN process
async function handleChangePin() {
    // Assuming userId is already available in a constant
    if (!userId) {
        showErrorModal('User ID not found. Please log in again.');
        return;
    }

    // Show the modal
    const pinModal = document.getElementById('pinModal');
    pinModal.style.display = 'block';

    const oldPin = await openPinModal('Enter your current PIN:', 'Your current PIN', true);
    if (!oldPin) return; // User canceled

    try {
        // Verify old PIN
        const verifyResponse = await fetch(`${host}/api/verify-pin`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ pin: oldPin, userId }),
        });

        if (!verifyResponse.ok) {
            throw new Error('Old PIN verification failed');
        }

        const verifyResult = await verifyResponse.json();

        if (verifyResult.valid) {
            const newPin = await openPinModal('Enter your new PIN:', 'Your new PIN', true);
            if (!newPin) return; // User canceled

            const confirmPin = await openPinModal('Confirm your new PIN:', 'Confirm your new PIN', true);
            if (!confirmPin) return; // User canceled

            if (newPin === confirmPin) {
                try {
                    const response = await fetch(`${host}/api/update-user`, {
                        method: 'PATCH',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ pin: newPin, userId }),
                    });

                    if (!response.ok) {
                        throw new Error('Network response for PIN update was not ok');
                    }

                    const result = await response.json();
                    showErrorModal(result.message || 'PIN updated successfully');
                } catch (error) {
                    console.error('Error updating PIN: ', error.message);
                    showErrorModal('Failed to update PIN: ' + error.message);
                }
            } else {
                showErrorModal('New PIN and confirmation do not match');
            }
        } else {
            showErrorModal('Old PIN is incorrect');
        }
    } catch (error) {
        console.error('Error verifying old PIN: ', error.message);
        showErrorModal('Failed to verify old PIN: ' + error.message);
    }

    // Hide the modal after processing
    pinModal.style.display = 'none';
}

// Open PIN modal for user input
function openPinModal(labelText, placeholderText, isNumeric) {
    return new Promise((resolve) => {
        const pinModal = document.getElementById('pinModal');
        const modalLabel = document.getElementById('modalLabel');
        const modalInput = document.getElementById('modalInput');
        const cancelButton = document.getElementById('cancelButton');
        const nextButton = document.getElementById('nextButton');

        modalLabel.textContent = labelText;
        modalInput.placeholder = placeholderText;
        modalInput.value = '';
        modalInput.type = isNumeric ? 'password' : 'text';

        pinModal.style.display = 'block';

        cancelButton.onclick = () => {
            pinModal.style.display = 'none';
            resolve(null); // User canceled
        };

        nextButton.onclick = () => {
            const inputValue = modalInput.value;
            pinModal.style.display = 'none';
            resolve(inputValue);
        };
    });
}

// Show error modal with a message
function showErrorModal(message) {
    const errorModal = document.getElementById('errorModal');
    const errorMessageElement = document.getElementById('errorMessage');

    if (errorMessageElement) {
        errorMessageElement.textContent = message;
    }

    if (errorModal) {
        errorModal.style.display = 'block';
    }

    const errorModalCloseButton = document.getElementById('errorModalCloseButton');
    if (errorModalCloseButton) {
        errorModalCloseButton.onclick = function () {
            errorModal.style.display = 'none';
        };
    }
}




        
        



        function loadContent(content) {
            document.getElementById('content').innerHTML = content;
        }







window.onload = () => {
    loadHomeContent();



    // Set the 'active' class on the home nav item
    const homeNavItem = document.querySelector('.nav-item.home');
    homeNavItem.classList.add('active');
    updateActiveNavItem(homeNavItem);

    document.querySelector('.nav-item.home').addEventListener('click', function () {
        loadHomeContent();
        updateActiveNavItem(this);
    });
    document.querySelector('.nav-item.chat').addEventListener('click', function () {
        goToChat();
        updateActiveNavItem(this);
    });
    document.querySelector('.nav-item.wallet').addEventListener('click', function () {
        goToWallet();
        updateActiveNavItem(this);
    });
    document.querySelector('.nav-item.reports').addEventListener('click', function () {
        goToReports();
        updateActiveNavItem(this);
    });
    document.querySelector('.nav-item.settings').addEventListener('click', function () {
        goToSettings();
        updateActiveNavItem(this);
    });
};

function updateActiveNavItem(activeItem) {
    const images = {
        home: 'https://i.imgur.com/hcw4OV5.png',
        chat: 'https://i.imgur.com/zsuMzik.png',
        reports: 'https://i.imgur.com/YcQvWA8.png',
        settings: 'https://i.imgur.com/w0cyjdA.png'
    };

    document.querySelectorAll('.bottom-nav .nav-item').forEach(item => {
        const img = item.querySelector('img');
        const section = item.classList[1]; // Get the section from class name (home, chat, etc.)

        if (item === activeItem) {
            img.src = images[section] || img.src; // Set the active image
            item.querySelector('p').style.color = 'red'; // Set active text color
        } else {
            img.src = getDefaultImage(section); // Reset to default image
            item.querySelector('p').style.color = '#666'; // Reset text color
        }
    });
}

function getDefaultImage(section) {
    const defaultImages = {
        home: 'https://i.imgur.com/PJTaj8d.png',
        chat: 'https://i.imgur.com/tlSmgYO.png',
        wallet: 'https://i.imgur.com/gpRfhJT.png',
        reports: 'https://i.imgur.com/iQfe2Wo.jpeg',
        settings: 'https://i.imgur.com/TS9TDbI.png'
    };
    return defaultImages[section] || 'https://i.imgur.com/PJTaj8d.png'; // Default to home image
}

    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300&display=swap');

body {
  font-family: 'Poppins', sans-serif;
}


            margin: 0;
            padding: 0;
            background-color: #ffffff;
            transition: all 2.9s ease-in-out;
        }

        








    
        




          /* Support Header styles */
#support-header {
    display: flex;
    align-items: center;
    justify-content: center; /* Center content horizontally */
    padding: 10px;
    background-color: #1A7EB1;
    color: white;
    border-bottom: 1px solid #ccc;
    height: 50px; /* Adjust height as needed */
}

#support-header h1 {
    margin: 0;
    font-size: 22px; /* Slightly reduced font size */
    line-height: 1.2; /* Adjust line-height to move text down */
    padding-top: 10px; /* Add padding to move text slightly down */
    font-weight: 400; /* Subtle reduction in boldness */
}

/* Container for support text */
.support-container {
    padding-bottom: 10px;
    padding-top: 10px;
    display: flex;
    align-items: center; /* Align items vertically in the center */
    margin: 20px; /* Space around the container */
    font-size: 16px; /* Adjusted base font size */
    color: #333;
    position: relative; /* To position the icon absolutely */
    cursor: pointer; /* Change cursor to pointer on hover */
    overflow: hidden; /* Hide overflow to ensure the effect stays within bounds */
}

/* Add pseudo-element for the effect */
.support-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 100%; /* Start off the left edge */
    bottom: 0;
    right: 0;
    background: #f2f2f2; /* Color of the effect */
    transition: left 0.2s ease-out; /* Shortened transition duration */
    z-index: -1; /* Ensure the effect is behind the content */
}

.support-container:active::before {
    left: 0; /* Move effect from left to right */
}

/* Circle with 'S' */
.support-circle {
    width: 30px; /* Reduced size of the circle */
    height: 30px;
    border-radius: 50%; /* Make it a circle */
    background-color: #1A7EB1; /* Background color */
    color: white; /* White text color */
    display: flex;
    align-items: center; /* Center text vertically */
    justify-content: center; /* Center text horizontally */
    margin-right: 10px; /* Space between circle and text */
    font-size: 16px; /* Reduced size of the 'S' */
}

/* Text styles */
.support-text {
    display: flex;
    flex-direction: column;
    text-align: left; /* Align text to the left */
    margin-right: 60px; /* Create space for the icon on the right */
}

.support-text p {
    margin: 0; /* Remove default margin */
    line-height: 1.2; /* Adjust line height if needed */
}

/* Text for 'CHAT WITH US' */
.support-text #support-text {
    font-size: 16px; /* Slightly reduced font size */
    color: black; /* Black text color */
    font-weight: bold; /* Bold text */
}

/* Text for 'Tap here to text us' */
.support-text #support-tap-to-text {
    font-size: 12px; /* Reduced font size */
    color: grey; /* Gray text color */
}

/* Icon styles */
.support-icon {
    width: 10px; /* Smaller size of the icon */
    height: 20px;
    position: absolute; /* Position the icon absolutely */
    right: 20px; /* Distance from the right edge of the container */
}

/* Make anchor tags fill the container */
.support-link {
    text-decoration: none; /* Remove underline */
    color: inherit; /* Inherit text color */
    display: block; /* Make the anchor tag a block-level element */
    transition: background-color 0.2s ease, opacity 0.2s ease; /* Shortened transition duration */
    outline: none; /* Removes the default outline */
    -webkit-tap-highlight-color: transparent; /* Removes the tap highlight color on touch devices */
}




/* General Modal Styles */
.modal,
.logout-modal,
.error-modal {
    display: none;
    position: fixed;
    z-index: 10000; /* Ensure modals are on top */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.4);
}

/* Modal Content Styles */
.modal-content,
.logout-modal-content,
.error-modal-content {
    background-color: #fefefe;
    margin: auto;
    padding: 30px 20px;
    border: 1px solid #888;
    border-radius: 8px;
    position: absolute;
    top: 40%; /* Move modal up slightly */
    left: 50%;
    transform: translate(-50%, -50%); /* Center the modal with an offset */
    width: 80%;
    max-width: 500px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
}

/* Label Styles */
.modal-content label {
    display: block;
    margin-bottom: 8px;
    font-weight: bold;
    font-size: 14px;
}

/* Input Field Styles */
.modal-content input {
    width: 100%;
    padding: 8px;
    margin-bottom: 8px;
    box-sizing: border-box;
    border: none;
    border-bottom: 2px solid #f44336;
    outline: none;
    font-size: 15px;
    -moz-appearance: textfield;
    appearance: textfield;
}

/* Input Focus Styles */
.modal-content input:focus {
    border-bottom: 2px solid #333;
}

/* Modal Buttons Styles */
.modal-buttons {
    display: flex;
    justify-content: space-between;
    margin-top: 15px;
}

/* Button Styles */
.modal-buttons button {
    width: 46%;
    padding: 8px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-size: 14px;
    transition: background-color 0.3s ease, opacity 0.1s ease, transform 0.2s ease;
    outline: none;
    -webkit-tap-highlight-color: transparent;
}

/* Cancel Button Styles */
.modal-buttons button.cancel {
    background-color: #fff;
    color: #f44336;
    border: 2px solid #f44336;
}

/* Send Button Styles */
.modal-buttons button.send {
    background-color: #f44336;
    color: white;
}

/* Button Hover and Active Styles */
.modal-buttons button:hover:active {
    opacity: 0.1;
}

.modal-buttons button:active {
    transform: scale(0.95);
}

/* Logout Modal Styles */
.logout-modal-content {
    margin: auto;
    padding: 20px;
    width: 70%;
    max-width: 400px;
    text-align: center;
    border-radius: 20px;
    position: absolute;
    top: 40%; /* Move modal up slightly */
    left: 50%;
    transform: translate(-50%, -50%); /* Center the modal with an offset */
}

.logout-modal-content h2 {
    font-weight: normal;
    margin: 10px 0;
}

.logout-modal-content p {
    color: grey;
    margin-bottom: 15px;
}

.logout-button-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
}

.logout-button {
    padding: 10px 20px;
    cursor: pointer;
    border: none;
    border-radius: 30px;
    font-size: 16px;
    width: 150px;
    transition: background-color 0.1s ease, opacity 0.1s ease;
    outline: none;
    -webkit-tap-highlight-color: transparent;
}

.logout-confirm {
    background-color: red;
    color: white;
    font-weight: normal;
}

.logout-cancel {
    background-color: white;
    color: red;
    border: 2px solid red;
    font-weight: normal;
}

.logout-button:active {
    opacity: 0.1;
    transform: scale(0.95);
}

/* Error Modal Styles */
.error-modal-content {
    margin: auto;
    padding: 15px;
    width: 70%;
    max-width: 350px;
    text-align: center;
    border-radius: 20px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    position: absolute;
    top: 40%; /* Move modal up slightly */
    left: 50%;
    transform: translate(-50%, -50%); /* Center the modal with an offset */
}

#errorTitle {
    color: black;
    font-weight: normal;
    font-size: 18px;
    margin-bottom: 8px;
}

#errorMessage {
    color: grey;
    font-size: 14px;
    margin-bottom: 12px;
}

#errorModalCloseButton {
    background-color: white;
    color: red;
    border: 2px solid red;
    padding: 12px;
    width: 150px;
    cursor: pointer;
    border-radius: 28px;
    font-size: 16px;
    display: inline-block;
    text-align: center;
    transition: background-color 0.3s ease, opacity 0.1s ease;
    outline: none;
    -webkit-tap-highlight-color: transparent;
}

#errorModalCloseButton:hover {
    background-color: white;
    color: red;
}

#errorModalCloseButton:active {
    opacity: 0.1;
    transform: scale(0.95);
}









.modal-required {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1000; /* Sit on top, ensure higher z-index */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgba(0, 0, 0, 0.4); /* Black with opacity */
}

.modal-content-required {
    background-color: #fefefe;
    position: absolute; /* Position the modal */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%); /* Center the modal */
    padding: 15px;
    border: 1px solid #888;
    width: 70%; /* Slightly larger modal width */
    max-width: 350px; /* Increase max-width slightly */
    border-radius: 15px;
    text-align: center; /* Center text */
    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2); /* Optional shadow for better appearance */
}

.modal-heading {
    font-size: 18px; /* Heading text size */
    color: #333; /* Heading text color */
    margin-bottom: 15px; /* Space below the heading */
}

.close-required {
    background-color: red; /* Red background */
    color: white; /* White text */
    border: 2px solid red; /* Red border */
    padding: 12px 40px; /* Increased button padding for wider button */
    border-radius: 28px; /* Button border radius increased */
    font-size: 16px; /* Increased button font size */
    font-weight: bold;
    cursor: pointer;
    margin-top: 15px;
    text-transform: uppercase; /* Optional: Make the button text uppercase */
    transition: opacity 0.1s ease; /* Add transition for opacity */
}

.close-required:hover,
.close-required:focus {
    background-color: red; /* Darker red on hover */
    transition: background-color 0.3s ease, opacity 0.1s ease; /* Add transition for opacity */
    outline: none; /* Removes the default outline */
    -webkit-tap-highlight-color: transparent; /* Removes the tap highlight color on touch devices */
}

.close-required:active {
    opacity: 0.1; /* Fading effect on active state */
}

.cancel-required {
    background-color: white; /* White background */
    color: red; /* Red text */
    border: 2px solid red; /* Red border */
    padding: 12px 40px; /* Same padding as close button */
    border-radius: 28px; /* Same border radius as close button */
    font-size: 16px; /* Same font size as close button */
    font-weight: bold;
    cursor: pointer;
    margin-top: 15px; /* Add margin to space out from the close button */
    text-transform: uppercase; /* Optional: Make the button text uppercase */
    transition: opacity 0.1s ease; /* Add transition for opacity */
}

.cancel-required:hover,
.cancel-required:focus {
    background-color: #f2f2f2; /* Slightly darker white on hover */
    transition: background-color 0.3s ease, opacity 0.1s ease; /* Add transition for opacity */
    outline: none; /* Removes the default outline */
    -webkit-tap-highlight-color: transparent; /* Removes the tap highlight color on touch devices */
}


.cancel-required:active {
    opacity: 0.1; /* Fading effect on active state */
}



.game-header {
  background-color: #1A7EB1;
  color: white;
  padding: 10px 0;
  text-align: center;
  font-size: 20px;
  font-weight: bold;
  letter-spacing: 1px;
  text-transform: uppercase;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 10;
}

.game-content {
  margin-top: 60px; /* Make space for the fixed header */
  padding: 0 2px;
  overflow-y: auto;
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.game-image-container {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-top: 5px;
  margin-bottom: 20px;
}

.game-image-container a {
  display: block;
  width: 250px;
  border-radius: 12px;
  overflow: hidden;
  background-image: linear-gradient(
    45deg,
    #ffcc00,
    #d40000,
    #a020f0,
    #ffcc00
  );
  background-size: 300% 300%;
  animation: game-casinoGlow 2s linear infinite;
  text-align: center;
  padding-bottom: 10px;
  text-decoration: none;
}

@keyframes game-casinoGlow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.game-image-container img {
  width: 100%;
  max-height: 200px;
  display: block;
}

.game-name {
  font-size: 18px;
  font-weight: bold;
  color: #ffcc00;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-top: 10px;
}




/*💵 Investment CSS */
.app-container {
  display: flex;
  flex-direction: column;
  height: 100vh;
}

header {
  background-color: #1A7EB1;
  color: white;
  text-align: center;
  padding: 8px;
  font-size: 1.1rem;
  font-weight: bold;
  flex-shrink: 0;
}

.content {
  flex: 1;
  overflow-y: auto;
  padding: 1px;
  padding-bottom: 80px; /* Prevent content being hidden behind nav */
  box-sizing: border-box;
}

    .top-info {
      display: flex;
      justify-content: space-around;
      padding: 6px 10px;
    }

    .info-box {
      text-align: center;
    }

    .info-box h4 {
      margin: 0;
      font-size: 0.8rem;
      color: #666;
    }

    .info-box p {
      margin: 2px 0 0;
      font-size: 0.95rem;
      font-weight: bold;
      background: linear-gradient(90deg, #ff00cc, #3333ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .circle-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 16px;
      margin-top: 6px;
    }

    

    .circle {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: conic-gradient(#ff00cc 30%, #eee 30%);
      position: relative;
    }

    .circle-inner {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
    }

    .circle-inner h5 {
      margin: 0;
      font-size: 0.75rem;
      color: #666;
    }

    .circle-inner p {
      margin: 3px 0 0;
      font-size: 0.95rem;
      font-weight: bold;
      background: linear-gradient(to right, #ff00cc, #3333ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .buttons {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin: 12px auto 4px;
    }

    .buttons button {
      background: linear-gradient(135deg, #ff00cc, #3333ff);
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      font-weight: bold;
      font-size: 0.8rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 4px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .info-text {
      text-align: center;
      font-size: 0.65rem;
      color: #666;
      padding: 4px 12px 10px;
      max-width: 300px;
      margin: 0 auto;
      line-height: 1.2;
    }

    .section-title {
      text-align: center;
      font-size: 0.85rem;
      font-weight: bold;
      color: #333;
      margin: 12px 0 5px;
    }

    .transaction-cards {
      display: flex;
      flex-direction: column;
      gap: 10px;
      padding: 0 16px 20px;
    }

    .transaction-card {
      background-color: #f9f9f9;
      border-radius: 8px;
      padding: 12px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-left: 5px solid #ff5733;
    }

    .transaction-info {
      flex: 1;
      margin-left: 12px;
    }

    .transaction-info h4 {
      margin: 0;
      font-size: 0.95rem;
      color: #333;
      font-weight: bold;
    }

    .transaction-info p {
      margin: 3px 0;
      color: #666;
      font-size: 0.85rem;
    }

    .transaction-amount {
      font-size: 1.1rem;
      font-weight: bold;
      color: #ff5733;
      background: linear-gradient(90deg, #ff5733, #ffcc00);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

  .label-free {
  color: #FF6347;
  font-weight: bold;
  background-color: rgba(255, 99, 71, 0.2);
  padding: 3px 6px;
  border-radius: 5px;
  border: 2px solid #FF6347;
  text-transform: uppercase;
  font-size: 8px;
  letter-spacing: 0.2px;
}


   .label-premium {
  font-size: 0.55rem;
  font-weight: bold;
  padding: 4px 10px;
  background: linear-gradient(135deg, #FFD700, #FFB700, #FFA500);
  color: black; /* Set text color to black */
  border: 2px solid #FFD700;
  border-radius: 20px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  text-transform: uppercase;
  letter-spacing: 1px;

  /* Remove text clipping */
  -webkit-background-clip: unset;
  -webkit-text-fill-color: unset;
}



.label-text {
      font-size: 0.85rem;
      font-weight: bold;
      color: #555;
    }



   .countdown-text {
  font-size: 0.8rem;
  font-weight: bold;
  color: #2E8B57;
  text-align: center;
  margin: 6px auto;
  padding: 4px 8px;
  background-color: #E6F4EA;
  border: 1px solid #2E8B57;
  border-radius: 12px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
  display: block;
  width: fit-content;
}




/* Bottom Navigation Container */
        .bottom-nav {
            display: flex;
            justify-content: center;
            background-color: white;
            padding: 8px 0; /* Increased padding for more height */
            position: fixed;
            bottom: 0;
            width: 100%;
            border-top: 1px solid #d3d3d3;
            z-index: 1;
        }

        /* Bottom Navigation Items Wrapper */
        .nav-items-wrapper {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 420px; /* Limit the width of the navigation */
        }

        /* Bottom Navigation Items */
        .bottom-nav .nav-item {
            text-align: center;
            margin: 0;
            padding: 5px;
            cursor: pointer;
            transition: opacity 0.2s ease, color 0.2s ease;
            outline: none;
            -webkit-tap-highlight-color: transparent;
            flex: 1;
        }

        /* Centered Games Icon (Updated) */
        .bottom-nav .nav-item.wallet {
            flex: 0; /* Prevent it from stretching */
        }

        .bottom-nav .nav-item i {
            font-size: 23px; /* Set icon size */
            margin-bottom: 1px;
            transition: transform 0.3s ease;
        }

        /* Make the Wallet icon the biggest */
        .bottom-nav .nav-item.wallet i {
            font-size: 35px; /* Adjusted for the wallet icon */
            color: white;
            background-color: #D3D3D3; /* Grey circle background */
            padding: 15px; /* Adjust size of the circle */
            border-radius: 50%; /* Make it a circle */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Optional: add shadow for effect */
            margin-top: -35px; /* Adjust vertical position */
            transition: all 0.3s ease;
        }

        /* Add glowing gradient effect for the 'Games' button */
        .bottom-nav .nav-item.wallet:hover i {
            background: linear-gradient(45deg, #ff6a00, #ee0979); /* Bright gradient colors for gaming */
            box-shadow: 0 0 15px 5px rgba(255, 105, 180, 0.8), 0 0 20px 10px rgba(255, 0, 150, 0.5); /* Glowing effect */
        }

        /* Specific rule for inactive state of wallet icon */
        .bottom-nav .nav-item.wallet.inactive i {
            color: white; /* Make Wallet icon white when inactive */
            background-color: #D3D3D3; /* Inactive state: Grey background */
        }

        /* When Wallet is active */
        .bottom-nav .nav-item.wallet.active i {
            background-color: #1A7EB1; /* Active state: Background changes */
            color: white; /* Icon remains white */
        }

        .bottom-nav .nav-item.wallet p {
            position: relative;
            top: 9px; /* Adjusted to align with the new height */
            margin: 0;
            font-size: 10px;
            font-weight: bold;
            color: #666;
        }

        .bottom-nav .nav-item p {
            margin: 0;
            font-size: 10px;
            font-weight: bold;
            color: #666;
        }

        /* Active state styling for the text and icon */
        .bottom-nav .nav-item.active i,
        .bottom-nav .nav-item.active p {
            color: #1A7EB1; /* Active color for both icon and text */
        }

        /* Inactive state styling */
        .bottom-nav .nav-item.inactive i,
        .bottom-nav .nav-item.inactive p {
            color: #D3D3D3; /* Inactive color for both icon and text */
        }

        /* Fading effect on active (click) state */
        .bottom-nav .nav-item:active {
            opacity: 0.2;
        }




.withdraw-bottom-sheet {
      position: fixed;
      bottom: -100%;
      left: 0;
      right: 0;
      background-color: white;
      height: 100%;
      z-index: 1000;
      display: flex;
      flex-direction: column;
    }

    .withdraw-bottom-sheet.open {
      bottom: 0;
    }

    .withdraw-header {
      background-color: #1A7EB1;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 25px 16px; /* Slightly reduced padding */
      font-size: 22px; /* Slightly smaller font */
      font-weight: bold;
      position: relative;
    }

    .withdraw-header .withdraw-title {
      position: absolute;
      left: 0;
      right: 0;
      text-align: center;
      pointer-events: none;
    }

    .withdraw-back-arrow {
      position: absolute;
      left: 16px;
      font-size: 20px; /* Slightly smaller back arrow */
      color: white;
      cursor: pointer;
    }

    .withdraw-form {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 14px;
      overflow-y: auto;
      align-items: center;
    }

    .withdraw-form-group {
      width: 90%;
      margin-bottom: 14px; /* Slightly reduced margin */
    }

    .withdraw-form-group label {
      font-size: 14px; /* Slightly smaller font */
      font-weight: bold;
      color: #333;
      margin-bottom: 5px; /* Slightly smaller margin */
      display: block;
    }

    .withdraw-form-group input {
      width: 100%;
      padding: 10px; /* Slightly smaller padding */
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px; /* Slightly smaller font */
      box-sizing: border-box;
    }

    .withdraw-form-group input:focus {
      border-color: #1A7EB1;
      outline: none;
    }

    .withdraw-insufficient-balance {
      color: red;
      font-size: 14px; /* Slightly smaller font */
      margin-bottom: 6px; /* Slightly smaller margin */
      text-align: center;
      display: none;
    }

    .withdraw-form button {
      padding: 12px;
      background-color: #1A7EB1;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 16px; /* Slightly smaller font */
      font-weight: bold;
      cursor: pointer;
      width: 90%;
      box-sizing: border-box;
    }

    .withdraw-form button:hover {
      background-color: #167AA6;
    }

    .withdraw-open-bottom-sheet-btn {
      padding: 12px 18px; /* Slightly smaller padding */
      background-color: #1A7EB1;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 16px; /* Slightly smaller font */
      font-weight: bold;
      cursor: pointer;
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: calc(100% - 36px);
      box-sizing: border-box;
    }



.app-container {
      max-width: 800px;
      margin: 0 auto;
    }

    .home-section {
      background: linear-gradient(to right, #1A7EB1, #1A7EB1);
      color: white;
      padding: 20px;
      display: flex;
      flex-direction: column;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    /* CSS to increase the icon size */
.user-icon i {
    font-size: 50px;
}


    .user-info {
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .user-info h2 {
      margin: 0;
      font-size: 16px;
      line-height: 1.4;
      display: flex;
      align-items: center;
    }

    .user-info h2 .verified-icon {
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: white;
      border-radius: 50%;
      width: 14px;
      height: 14px;
      margin-left: 5px;
    }

    .user-info h2 .verified-icon i {
      color: #1A7EB1;
      font-size: 10px;
      font-weight: bold;
    }

    .user-info p {
      font-size: 12px;
      margin-top: -4px;
      line-height: 1.5;
      font-weight: 300;
    }

    .header-right {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .notification-icon {
      font-size: 24px;
      color: white;
      cursor: pointer;
      transition: opacity 0.3s ease;
    }

    .notification-icon:active {
      opacity: 0.7;
    }

    .balance-wrapper {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 30px;
    }

    .balance-container {
      display: flex;
      align-items: center;
    }

    .balance {
      font-size: 18px;
      margin-right: 10px;
      display: flex;
      align-items: center;
    }

    .balance .currency {
      font-weight: normal;
      margin-right: 5px;
      font-size: 10px;
    }

    .balance .amount {
      font-family: 'Peace Sans', sans-serif;
      font-weight: 900;
    }

    .skeleton-loader {
      background-color: #e0e0e0;
      width: 60px;
      height: 18px;
      border-radius: 4px;
      animation: skeleton-loading 1.2s infinite;
    }

    @keyframes skeleton-loading {
      0% { background-color: #e0e0e0; }
      50% { background-color: #f0f0f0; }
      100% { background-color: #e0e0e0; }
    }

    .balance-container img {
      width: 19px;
      height: 15px;
      cursor: pointer;
      margin-left: 7px;
      transition: opacity 0.3s ease;
    }

    .balance-container img:active {
      opacity: 0.3;
    }

    .floating-button button {
      background-color: transparent;
      border: 1px solid white;
      color: white;
      border-radius: 20px;
      padding: 8px 16px;
      font-size: 14px;
      cursor: pointer;
      transition: opacity 0.3s ease;
    }

    .floating-button button:active {
      opacity: 0.2;
    }

    .action-buttons {
      display: flex;
      justify-content: space-around;
      margin: 25px 20px 10px;
      gap: 16px;
    }

    .action-button {
      background-color: white;
      color: #1A7EB1;
      border: none;
      border-radius: 16px;
      padding: 14px 20px;
      flex: 1;
      text-align: center;
      font-size: 16px;
      font-weight: bold;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .action-button:hover {
      transform: translateY(-2px);
    }

    .action-button:active {
      transform: scale(0.98);
    }

    .action-button i {
      color: #1A7EB1;
    }

    .icon-button-row {
      display: flex;
      justify-content: space-around;
      gap: 10px;
      padding: 20px;
    }

    .icon-button {
      display: flex;
      flex-direction: column;
      align-items: center;
      background-color: white;
      padding: 12px;
      border-radius: 16px;
      flex: 1;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      transition: transform 0.2s ease;
    }

    .icon-button:hover {
      transform: translateY(-2px);
    }

    .icon-button:active {
      transform: scale(0.97);
    }

    .icon-button i {
      color: #1A7EB1;
      margin-bottom: 6px;
    }

    .icon-button span {
      font-size: 13px;
      color: #1A7EB1;
      font-weight: 500;
    }

    /* Luxury Total Gained Section */
    .monthly-gain {
      margin: 20px;
      padding: 5px;
      background: linear-gradient(135deg, #fff8e1, #f9d976);
      border-radius: 20px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
      text-align: center;
      transition: all 0.3s ease;
      border: 1px solid #f5deb3;
    }

    .monthly-gain:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 36px rgba(0, 0, 0, 0.25);
    }

    .monthly-gain h3 {
      color: #b68c26;
      font-size: 15px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .monthly-gain .amount {
      font-size: 20px;
      font-weight: bold;
      color: #3e2f13;
      font-family: 'Peace Sans', sans-serif;
      margin: 8px 0;
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }

    .monthly-gain .month {
      font-size: 14px;
      color: #7a6229;
      font-style: italic;
    }







.settings-section .header {
  background: linear-gradient(to right, #1A7EB1, #1A7EB1);
  color: white;
  padding: 15px;
  text-align: center;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 1000;
  box-sizing: border-box;
  height: 180px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.settings-section .user-info {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: 10px;
}

.settings-section .user-info h2 {
  margin: 5px 0;
  font-size: 20px;
  text-transform: uppercase;
  font-weight: 500;
}

.settings-section .user-info p {
  margin: 5px 0;
  font-size: 17px;
  line-height: 1.5;
  font-weight: 300;
  letter-spacing: 3px;
}

.settings-section .user-details {
  padding: 20px;
  background-color: #ffffff;
  margin-top: 190px;
  box-sizing: border-box;
  overflow-y: auto;
  height: calc(100vh - 180px - 100px);
}

.detail-item {
  padding: 15px 0;
  border-bottom: 1px solid #ddd;
  display: flex;
  align-items: flex-start;
  position: relative;
  overflow: hidden;
  cursor: pointer;
  transition: background-color 0.2s ease, opacity 0.2s ease;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.detail-item:last-child {
  border-bottom: 1px solid #ddd;
}

.detail-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: 100%;
  bottom: 0;
  right: 0;
  background: rgba(242, 242, 242, 0.7);
  transition: left 0.2s ease-out;
  z-index: 0;
}

.detail-item:active::before {
  left: 0;
}

.detail-item .info {
  display: flex;
  flex-direction: column;
}

.detail-item .label {
  font-size: 15px;
  font-weight: bold;
  color: #888;
  margin-bottom: 7px;
}

.detail-item .value {
  font-size: 14px;
  font-weight: 300;
  color: #555;
}

.detail-item:focus {
  outline: none;
}

.detail-item .icon {
  font-size: 16px;
  margin-right: 10px;
  color: #4a4a4a;
}

.detail-item .icon:hover {
  color: #007bff;
}

.detail-item .icon,
.detail-item .info {
  position: relative;
  z-index: 1;
}



    </style>
</head>
<body>
    <div id="content"></div>
    <div class="bottom-nav">
        <div class="nav-items-wrapper">
            <div class="nav-item home inactive">
                <i class="fas fa-home"></i>
                <p>Home</p>
            </div>
            <div class="nav-item chat inactive">
                <i class="fas fa-headset"></i>
                <p>Support</p>
            </div>

            <!-- Centered Games Icon with Shining Effect -->
            <div class="nav-item wallet inactive">
                <i class="fas fa-gamepad"></i> <!-- Changed icon to 'gamepad' -->
                <p>Games</p>
            </div>

            <div class="nav-item reports inactive">
                <i class="fas fa-chart-line"></i>
                <p>Investments</p>
            </div>
            <div class="nav-item settings inactive">
                <i class="fas fa-cogs"></i>
                <p>Settings</p>
            </div>
        </div>
    </div>
</body>
</html>
